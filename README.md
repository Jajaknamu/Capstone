# ğŸ“–êµìˆ˜ë‹˜ ë°±ê³¼ì‚¬ì „[v1, v2] - êµìˆ˜ í‰ê°€/ì¶”ì²œ ì‹œìŠ¤í…œ

**Java / Spring Boot / Spring Data JPA / Thymeleaf / OAuth2 / AJAX ê¸°ë°˜ ë©”ì¸ í”„ë¡œì íŠ¸**

> ğŸ“¬ ì´ë©”ì¼: heyfer6867@gmail.com

> ğŸ’¼ í¬íŠ¸í´ë¦¬ì˜¤:  [v1-ìì„¸íˆë³´ê¸°(Notion)](https://unique-income-725.notion.site/v1-141042ddfb21400796d8bfb57cb196e8?source=copy_link) / [v2-ìì„¸íˆë³´ê¸°(Notion)](https://unique-income-725.notion.site/v2-35886184f1134aaebc02db5441b9508d?source=copy_link) 
---

## ğŸ’¡ í”„ë¡œì íŠ¸ ì†Œê°œ
> **[v1]** : Spring Boot ê¸°ë°˜ìœ¼ë¡œ íšŒì›ê°€ì…, ë¡œê·¸ì¸, êµìˆ˜ CRUD, ê²Œì‹œíŒ, ë§ˆì´í˜ì´ì§€ ë“± í•µì‹¬ ê¸°ëŠ¥ì„ êµ¬í˜„  
> **[v2]** : v1ë³´ë‹¤ ë” ë‹¤ì–‘í•œ ê¸°ëŠ¥ ì¶”ê°€ ë° ì¸ì¦/ì¸ê°€ ì²˜ë¦¬ ì¶”ê°€

> Spring Boot ê¸°ë°˜ì˜ êµìˆ˜ ì •ë³´, ê°•ì˜ í›„ê¸°, ì—°êµ¬ì‹¤ ì†Œê°œ ë° ì¶”ì²œ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤.

## âš™ï¸ ê°œë°œ í™˜ê²½ ë° ê¸°ìˆ  ìŠ¤íƒ

| Category            | Stack                                                                 |
|-----------------    |-----------------------------------------------------------------------|
| **Language**        | Java 17                                                               |
| **Backend**         | Spring Boot 3.3.3, Spring Security, OAuth2 (Google/Naver)             |
| **Frontend**        | Thymeleaf, HTML/CSS, JavaScript, AJAX                                 |
| **Template Engine** | Thymeleaf                                                             |
| **Database / ORM**  | MySQL, Spring Data JPA                                                |
| **Build Tool**      | Gradle                                                                |
| **IDE**             | IntelliJ IDEA                                                         |
| **Tools**           | Git, GitHub, MySQL Workbench                                          |
| **Testing**         |JUnit                                                                  |


## ğŸ‘¥ ê°œë°œ ì¸ì› ë° ê¸°ê°„

### 1ï¸âƒ£êµìˆ˜ë‹˜ ë°±ê³¼ì‚¬ì „[v1]
#### ê°œë°œ ê¸°ê°„ - 2023.02.28 ~ 2023.06.25
#### ğŸ“Œ ì—­í•  ë° ê¸°ëŠ¥ - íŒ€ í”„ë¡œì íŠ¸
- íŒ€ì¥-ì •ì§€ì€(ë°±ì—”ë“œ) : íšŒì›ê°€ì…, ê´€ë¦¬ì, ê²Œì‹œíŒ ì´ê´„ê°œë°œ(CRUD), í†µí•© ë° ê´€ë¦¬, ë°œí‘œ, ê¸°íš
- íŒ€ì›-ì§„oo(í”„ë¡ íŠ¸ì—”ë“œ) : íšŒì›ê°€ì… ë° ë¡œê·¸ì¸ CSS,ë¬¸ì„œ ì‘ì„±
- íŒ€ì›-ì´oo(í”„ë¡ íŠ¸ì—”ë“œ) : ê²Œì‹œíŒ, ë§ˆì´í˜ì´ì§€, êµìˆ˜ í”„ë¡œí•„ ê·¸ ì™¸ ëª¨ë“  CSS,PPT ì‘ì„±, ê¸°íš, ë¬¸ì„œ ì‘ì„±
  
### 2ï¸âƒ£êµìˆ˜ë‹˜ ë°±ê³¼ì‚¬ì „[v2]
#### ê°œë°œ ê¸°ê°„ - 2024.11.03 ~ 2025.02.21
#### ğŸ“Œ ê¸°ëŠ¥ ì¶”ê°€ - ê°œì¸ í”„ë¡œì íŠ¸ 
- ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ê¸°ë°˜ ë¡œê·¸ì¸ ë° ì†Œì…œ ë¡œê·¸ì¸
- íšŒì›ê°€ì… ì¤‘ë³µ ê²€ì‚¬, íšŒì›ì •ë³´ ìˆ˜ì • ë° íƒˆí‡´
- ê´€ë¦¬ì ì „ìš© êµìˆ˜/ì—°êµ¬ì‹¤ CRUD ê¸°ëŠ¥
- êµìˆ˜ ì¶”ì²œ ê¸°ëŠ¥ (ì¤‘ë³µ ë°©ì§€, Ajax ì²˜ë¦¬)
- ì—°êµ¬ì‹¤ ê´€ì‹¬ ê¸°ëŠ¥ (í† ê¸€ ë°©ì‹, Ajax ì²˜ë¦¬)
- ê²Œì‹œê¸€ ê²€ìƒ‰, êµìˆ˜ ì„ íƒ ê°•ì˜í‰ ë“±ë¡
- ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ ëŒ“ê¸€ ì‘ì„± ê°€ëŠ¥ (Ajax ì²˜ë¦¬)

## ğŸ”— êµ¬í˜„ ê¸°ëŠ¥ / ì œì•½ ì¡°ê±´

<img alt="image" src="https://github.com/user-attachments/assets/56e22cb7-04f7-4ba3-b629-6af9a59e1e5e" />


## ğŸ“Œ í”„ë¡œì íŠ¸ ëª©í‘œ ë° í•™ìŠµ í¬ì¸íŠ¸
- ë‹¤ì–‘í•œ JPA ì—°ê´€ê´€ê³„ ë§¤í•‘
- N + 1 ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ ì¿¼ë¦¬ íŠœë‹
- ê¸°ëŠ¥í™•ì¥ê³¼ ì„±ëŠ¥ ìµœì í™”
- ì¸ì¦ ë° ë³´ì•ˆ ê°•í™”
- ê´€ë¦¬ì ì „ìš© í˜ì´ì§€ ë¶„ë¦¬

## ğŸ“ ê¸°íƒ€ ì°¸ê³ 
- MVC êµ¬ì¡°ë¥¼ ë²—ì–´ë‚˜ RESTful API í˜•ì‹ìœ¼ë¡œ êµ¬ì„± í•„ìš” -> ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œ ë¶„ë¦¬ í•„ìš”
- CI/CD, ë°°í¬ëŠ” í¬í•¨ë˜ì§€ ì•ŠìŒ (ì¶”í›„ EC2 + Docker ëª©í‘œ)

## ğŸ§© ì‹œì—° ì˜ìƒ

> ê´€ë¦¬ìê¸°ëŠ¥ ë° ë‹¤ë¥¸ ê¸°ëŠ¥ì˜ ìì„¸í•œ ì‹œì—° í™”ë©´ì€ ë…¸ì…˜ í¬íŠ¸í´ë¦¬ì˜¤ [v1](https://unique-income-725.notion.site/v1-141042ddfb21400796d8bfb57cb196e8?source=copy_link) / [v2](https://unique-income-725.notion.site/v2-35886184f1134aaebc02db5441b9508d?source=copy_link) ì— í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

> https://github.com/user-attachments/assets/18bcb774-ca14-41a3-8e56-a774ed02c42d

## ğŸ“Œ ì¼ë¶€ ì½”ë“œ ì˜ˆì‹œ -> êµìˆ˜ ì¶”ì²œ ê¸°ëŠ¥

- ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ êµìˆ˜ ì¶”ì²œ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì´ë¯¸ ì¶”ì²œí–ˆëŠ”ì§€ ì—¬ë¶€ì— ë”°ë¼ ì¶”ì²œ/ì¶”ì²œ ì·¨ì†Œ ê°€ëŠ¥

```java
// êµìˆ˜ ì¶”ì²œ ìš”ì²­ ì²˜ë¦¬
    @PostMapping("/recommend/{id}")
    @ResponseBody
    public String recommendProfessor(@PathVariable("id") Long id,
                                     @AuthenticationPrincipal CustomUserDetails customUserDetails) {
        //ë¡œê·¸ì¸ëœ íšŒì› ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        String loginEmail = customUserDetails.getMemberEntity().getMemberEmail();
        if (loginEmail != null) {
            MemberDTO memberDTO = memberService.findByEmail(loginEmail); // íšŒì› ì •ë³´ ì¡°íšŒ
            boolean isAdded = professorService.recommendProfessor(id, memberDTO.getId()); // ì¶”ì²œ or ì¶”ì²œ ì·¨ì†Œ ì²˜ë¦¬
  
            return isAdded ? "added" : "canceled"; // // JS ì¸¡ì—ì„œ ì‘ë‹µ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ UI ì²˜ë¦¬
        } else {
            return "unauthorized"; // ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ì ì²˜ë¦¬
        }
    }
```

```java
//êµìˆ˜ë‹˜ ì¶”ì²œ ê¸°ëŠ¥ : ì´ë¯¸ ì¶”ì²œí–ˆìœ¼ë©´ ì·¨ì†Œ, ì•„ë‹ˆë©´ ì¶”ì²œ ë“±ë¡
    @Transactional
    public boolean recommendProfessor(Long professorId, Long memberId) {
        // ì´ë¯¸ ì¶”ì²œí–ˆëŠ”ì§€ í™•ì¸
        boolean alreadyRecommended = recommendationRepository.existsByProfessorIdAndMemberId(professorId, memberId);

        //êµìˆ˜, íšŒì› ì •ë³´ ì¡°íšŒ
        ProfessorEntity professor = professorRepository.findById(professorId)
                .orElseThrow(() -> new IllegalArgumentException("êµìˆ˜ë‹˜ ì°¾ì„ ìˆ˜ ì—†ìŒ"));
        MemberEntity member = memberRepository.findById(memberId)
                .orElseThrow(() -> new IllegalArgumentException("íšŒì› ì •ë³´ ì°¾ì„ ìˆ˜ ì—†ìŒ"));

        if (alreadyRecommended) {
            // ì¶”ì²œì„ ì´ë¯¸ í–ˆìœ¼ë©´ ì¶”ì²œ ì·¨ì†Œ
            recommendationRepository.deleteByProfessorIdAndMemberId(professorId, memberId);
            professor.setLikesCount(Math.max(0, professor.getLikesCount() - 1)); //ì¶”ì²œ ìˆ˜ ê°ì†Œ (ìµœì†Œ 0ìœ¼ë¡œ ë°©ì–´)
            professorRepository.save(professor);
            return false; //ì¶”ì²œ ì·¨ì†Œë¨
        } else {
            // ì¶”ì²œí•˜ì§€ ì•Šì€ ê²½ìš° â†’ ì¶”ì²œ ë“±ë¡
            ProfessorRecommendationEntity recommendation = ProfessorRecommendationEntity.builder()
                    .professor(professor)
                    .member(member)
                    .build();
            recommendationRepository.save(recommendation);
            professor.setLikesCount(professor.getLikesCount() + 1);  // ì¶”ì²œ ìˆ˜ ì¦ê°€
            professorRepository.save(professor);
            return true;// ì¶”ì²œë¨
        }
    }
```


